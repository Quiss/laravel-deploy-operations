# Upgrading To 6.x from 5.x

## High-Impact Changes

- [Updating Dependencies](#updating-dependencies)
- [Changed the namespace](#changed-the-namespace)
- [Changed the name of the main class](#changed-the-name-of-the-main-class)
- [Changed names of console commands](#changed-names-of-console-commands)
- [Changed event names](#changed-event-names)
- [Configuration file name changed](#configuration-file-name-changed)

## Minor-Impact Changes

- [Changed file location](#changed-file-location)

## Low-Impact Changes

- [Stub name changed](#stub-name-changed)

## Updating Dependencies

You should change the package name in the `composer.json` file from `dragon-code/laravel-actions`
to `dragon-code/laravel-deploy-operations`, and also change its version to `^6.0`:

```json lines
{
    "require": {
        // ...
        "dragon-code/laravel-deploy-operations": "^6.0"
    }
}
```

Then you need to update the dependencies:

```bash
composer update
```

## Changed the namespace

The namespace has been changed from `DragonCode\LaravelActions` to `DragonCode\LaravelDeployOperations`.

You need to replace it in all actions of your application, as well as when using [events](../../helpers/events.md).

## Changed the name of the main class

You should replace `DragonCode\LaravelActions\Action` namespace with `DragonCode\LaravelDeployOperations\Operation`.

## Changed names of console commands

| New Name              | Old Name           |
|-----------------------|--------------------|
| `make:operation`      | `make:action`      |
| `operations`          | `actions`          |
| `operations:fresh`    | `actions:fresh`    |
| `operations:install`  | `actions:install`  |
| `operations:refresh`  | `actions:refresh`  |
| `operations:reset`    | `actions:reset`    |
| `operations:rollback` | `actions:rollback` |
| `operations:status`   | `actions:status`   |
| `operations:stub`     | `actions:stub`     |
| `operations:upgrade`  | `actions:upgrade`  |

## Changed event names

| New Name                    | Old Name           |
|-----------------------------|--------------------|
| `DeployOperationStarted`    | `ActionStarted`    |
| `DeployOperationEnded`      | `ActionEnded`      |
| `DeployOperationFailed`     | `ActionFailed`     |
| `NoPendingDeployOperations` | `NoPendingActions` |

Don't forget to also change the namespace from `DragonCode\LaravelActions\Events`
to `DragonCode\LaravelDeployOperations\Events`.

## Configuration file name changed

We recommend that you delete the old configuration file `config/actions.php` and publish a new one.
This way you will see the changes made to it.

```bash
php artisan vendor:publish --provider="DragonCode\LaravelDeployOperations\ServiceProvider"
```

## Changed names of constants

If you use package constant references, you must also rename them.

The old name was in `UPPER_CASE`, the new one was in `PascalCase`.

For example:

```php
// Old
class Names
{
    public const ACTIONS = 'actions';
    public const FRESH = 'actions:fresh';
    // ...
}
```

```php
// New
class Names
{
    public const Operations = 'operations';
    public const Fresh = 'operations:fresh';
    // ...
}
```

## Changed file location

File storage directory changed to `operations` from `actions`.

## Stub name changed

If you published a stub file, then you also need to rename it from `stubs/action.stub` to `stubs/deploy-operation.stub`
and make changes to its structure. 
